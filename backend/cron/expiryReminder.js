const cron=require('node-cron');const VerificationDoc=require('../models/VerificationDoc');module.exports=function(){cron.schedule('0 8 * * *',async()=>{try{const soon=new Date();soon.setDate(soon.getDate()+30);const docs=await VerificationDoc.find({expiresAt:{$lte:soon}}).populate('user');for(const d of docs){console.log('Expiry reminder for',d.user&&d.user.email);} }catch(e){console.error('cron error',e);} });};