<!DOCTYPE html>
<html><head><title>Admin Analytics</title><script src="https://cdn.jsdelivr.net/npm/chart.js"></script></head><body>
<%- include('../partials/header') %>
<h1>Admin Analytics</h1>
<div>Categories: <%= catCount %></div>
<div>Users: <%= userCount %></div>
<div>Plans: <%= planCount %></div>
<h2>Top Categories (Jobs)</h2>
<canvas id="catsChart" width="600" height="300"></canvas>
<script>
const labels = <%- JSON.stringify(agg.map(a=>a._id)) %>;
const data = <%- JSON.stringify(agg.map(a=>a.count)) %>;
const ctx = document.getElementById('catsChart').getContext('2d');
new Chart(ctx, { type: 'bar', data: { labels, datasets: [{ label: 'Jobs', data }] } });
</script>
<%- include('../partials/footer') %>
</body></html>
